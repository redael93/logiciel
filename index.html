<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prendre des commandes</title>
    <style>
        .section {
            display: none;
        }
        .visible {
            display: block;
        }
    </style>
</head>
<body>
    <h1>Prendre des commandes</h1>

    <!-- Section Bip -->
    <div id="bipSection" class="section visible">
        <h2>Sélection du Bip</h2>
        <label for="bip">Entrez le numéro du Bip :</label>
        <input type="number" id="bip" name="bip" required>
        <button onclick="goToSection('typeSection')">Suivant</button>
    </div>

    <!-- Section Type de Produit -->
    <div id="typeSection" class="section">
        <h2>Choix du Type de Produit</h2>
        <button onclick="showPizzaOptions()">Pizza</button>
        <button onclick="goToSection('boissonSection')">Boisson</button>
        <button onclick="goToSection('dessertSection')">Dessert</button>
    </div>

    <!-- Section Choix de Pizza -->
    <div id="pizzaSection" class="section">
        <h2>Choix de la Pizza</h2>
        <button onclick="selectPizza('Indienne')">Indienne</button>
        <button onclick="selectPizza('Kebab')">Kebab</button>
        <button onclick="selectPizza('Française')">Française</button>
        <button onclick="selectPizza('Chèvre Miel')">Chèvre Miel</button>
    </div>

    <!-- Section Modification Ingrédients -->
    <div id="ingredientSection" class="section">
        <h2>Modification des Ingrédients</h2>
        <div>
            <h3>Ajouter Ingrédients</h3>
            <button onclick="modifyIngredient('Ajouter', 'Sauce Tomate')">Sauce Tomate (+0,50€)</button>
            <button onclick="modifyIngredient('Ajouter', 'Crème Fraîche')">Crème Fraîche (+0,50€)</button>
            <button onclick="modifyIngredient('Ajouter', 'Lardons')">Lardons (+0,50€)</button>
            <button onclick="modifyIngredient('Ajouter', 'Poivrons')">Poivrons (+0,50€)</button>
        </div>
        <div>
            <h3>Supprimer Ingrédients</h3>
            <button onclick="modifyIngredient('Supprimer', 'Sauce Tomate')">Sauce Tomate</button>
            <button onclick="modifyIngredient('Supprimer', 'Crème Fraîche')">Crème Fraîche</button>
            <button onclick="modifyIngredient('Supprimer', 'Lardons')">Lardons</button>
            <button onclick="modifyIngredient('Supprimer', 'Poivrons')">Poivrons</button>
        </div>
        <div>
            <h3>Remplacer Ingrédients</h3>
            <button onclick="modifyIngredient('Remplacer', 'Sauce Tomate')">Sauce Tomate</button>
            <button onclick="modifyIngredient('Remplacer', 'Crème Fraîche')">Crème Fraîche</button>
            <button onclick="modifyIngredient('Remplacer', 'Lardons')">Lardons</button>
            <button onclick="modifyIngredient('Remplacer', 'Poivrons')">Poivrons</button>
        </div>
        <button onclick="validateSelection()">Valider</button>
    </div>

    <!-- Section Boisson -->
    <div id="boissonSection" class="section">
        <h2>Choix de la Boisson</h2>
        <button onclick="addBoisson('Coca')">Coca (1€)</button>
        <button onclick="addBoisson('Fanta')">Fanta (1€)</button>
        <button onclick="addBoisson('Évian')">Évian (1€)</button>
        <button onclick="validateSelection()">Valider</button>
    </div>

    <!-- Section Dessert -->
    <div id="dessertSection" class="section">
        <h2>Choix du Dessert</h2>
        <button onclick="addDessert('Tiramisu')">Tiramisu (2€)</button>
        <button onclick="addDessert('Tarte aux Daims')">Tarte aux Daims (2€)</button>
        <button onclick="validateSelection()">Valider</button>
    </div>

    <!-- Section Commande en cours -->
    <h2>Commande en cours</h2>
    <ul id="orderList"></ul>
    <p id="totalAmount">Montant total de la commande : 0€</p>
    <button onclick="nextOrder()">Passer à la commande suivante</button>
    <button onclick="closeOrder()">Clôturer le compte</button>

    <script>
        let orderCount = 1;
        let currentOrderAmount = 0;
        let totalAmount = 0;
        let orders = [];

        function goToSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('visible');
            });
            document.getElementById(sectionId).classList.add('visible');
        }

        function showPizzaOptions() {
            goToSection('pizzaSection');
        }

        function selectPizza(pizza) {
            let listItem = document.createElement('li');
            listItem.textContent = `Pizza: ${pizza} (3€)`;
            currentOrderAmount += 3;
            orderList.appendChild(listItem);
            goToSection('ingredientSection');
        }

        function modifyIngredient(action, ingredient) {
            let listItem = document.createElement('li');
            if (action === 'Ajouter') {
                listItem.textContent = `${action}: ${ingredient} (+0,50€)`;
                currentOrderAmount += 0.5;
            } else if (action === 'Supprimer') {
                listItem.textContent = `${action}: ${ingredient} (-)`;
            } else {
                listItem.textContent = `${action}: ${ingredient}`;
            }
            orderList.appendChild(listItem);
        }

        function validateSelection() {
            goToSection('typeSection');
        }

        function addBoisson(boisson) {
            let listItem = document.createElement('li');
            listItem.textContent = `Boisson: ${boisson} (1€)`;
            currentOrderAmount += 1;
            orderList.appendChild(listItem);
        }

        function addDessert(dessert) {
            let listItem = document.createElement('li');
            listItem.textContent = `Dessert: ${dessert} (2€)`;
            currentOrderAmount += 2;
            orderList.appendChild(listItem);
        }

        function updateTotalAmount() {
            document.getElementById('totalAmount').textContent = `Montant total de la commande : ${currentOrderAmount}€`;
        }

        function nextOrder() {
            let orderItems = Array.from(orderList.children).map(item => item.textContent);
            orders.push({
                number: orderCount,
                items: orderItems,
                amount: currentOrderAmount
            });

            orderCount++;
            currentOrderAmount = 0;
            orderList.innerHTML = '';
            updateTotalAmount();
            goToSection('bipSection');
        }

        function closeOrder() {
            let finalOrderSummary = '';

            orders.forEach(order => {
                finalOrderSummary += `Commande ${order.number}:\n`;
                let pizzas = order.items.filter(item => item.includes('Pizza'));
                let boissons = order.items.filter(item => item.includes('Boisson'));
                let desserts = order.items.filter(item => item.includes('Dessert'));
                let ingredients = order.items.filter(item => item.includes('Ajouter') || item.includes('Supprimer') || item.includes('Remplacer'));

                pizzas.forEach(pizza => finalOrderSummary += pizza + '\n');
                ingredients.forEach(ingredient => finalOrderSummary += ingredient + '\n');
                boissons.forEach(boisson => finalOrderSummary += boisson + '\n');
                desserts.forEach(dessert => finalOrderSummary += dessert + '\n');
                finalOrderSummary += `Total de la commande ${order.number}: ${order.amount}€\n\n`;

                totalAmount += order.amount;
            });

            finalOrderSummary += `Montant total de toutes les commandes : ${totalAmount}€`;

            alert(finalOrderSummary);
            orders = [];
            totalAmount = 0;
            orderCount = 1;
            currentOrderAmount = 0;
            orderList.innerHTML = '';
            updateTotalAmount();
            goToSection('bipSection');
        }
    </script>
</body>
</html>
